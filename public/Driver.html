<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - VeLinked</title>
    <!-- Di dalam elemen <head> -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="VL/css/driver_personal_content.css">
    <link rel="stylesheet" href="VL/css/driver_vehicle.css">
    <link rel="stylesheet" href="VL/css/driver_expanse.css">
    <link rel="stylesheet" href="VL/css/driver_log_content.css">
    <link rel="stylesheet" href="assets/vendors/chartjs/Chart.min.css">
    <link rel="stylesheet" href="VL/css/driver.css">
    <link rel="stylesheet" href="assets/vendors/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" href="assets/css/app.css">
    <link rel="stylesheet" href="VL/css/driver_doc.css">
    <link rel="shortcut icon" href="assets/images/icon.svg" type="image/x-icon">
        <!-- include only the Firebase features as you need -->
        <script defer src="/__/firebase/10.9.0/firebase-app-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-auth-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-database-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-functions-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-messaging-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-storage-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-analytics-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-remote-config-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-performance-compat.js"></script>

        <script defer src="/__/firebase/init.js?useEmulator=true"></script>

        <style>
             #overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Latar belakang gelap */
  display: none;
  z-index: 999;
}

#formContainer {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: none;
  z-index: 1000;
  width: 90%; /* Adjusted for responsiveness */
  max-width: 550px; /* Max width for larger screens */
  box-sizing: border-box; /* Include padding in width */
}
        </style>
</head>
<body>
    

<div id="alertContainer">
</div>
<!--</header>-->
    <div id="app" style="height: 100vh; display: flex;">
        <div id="sidebar" class='active'>
            <div class="sidebar-wrapper active">
    <div class="sidebar-header">
        <img src="assets/images/VL.svg" alt="" srcset="">
    </div>
    <div class="sidebar-menu">
        <ul class="menu">
            
            
                <li class='sidebar-title'>Main Menu</li>
            

                <li class="sidebar-item  ">
                    <a href="dashboard.html" class='sidebar-link'>
                        <img src="assets/images/Dash.svg" style="width: 20px;"> 
                        <span>Dashboard</span> 
                    </a>
                </li>
                <li class="sidebar-item active">
                    <a href="Driver.html" class='sidebar-link'>
                        <img src="assets/images/DriverActive.svg" style="width: 20px;"> 
                        <span>Driver Data</span> 
                    </a>
                </li>
                <li class="sidebar-item ">
                    <a href="Expanse.html" class='sidebar-link'>
                        <img src="assets/images/Expanse.svg" style="width: 20px;"> 
                        <span>Expenses</span> 
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="Attendance.html" class='sidebar-link'>
                        <img src="assets/images/Attendance.svg" style="width: 20px;"> 
                        <span>Attendance</span> 
                    </a>
                </li>
                        
               
    </div>
    <button class="sidebar-toggler btn x"><i data-feather="x"></i></button>
</div>
        </div>
        <div id="main" style="flex: 1; background-color: white;">
            <nav class="navbar navbar-header navbar-expand navbar-light" style="background-color: white; padding-bottom: 100px;">
                <div style=" padding: 20px; margin-top: 100px;">
                    <b>
                      <strong><h3 style="font-weight: bold">Your Driver Data</h3></strong>
                      <p style="font-weight: 350;" class="text-subtitle text-muted">monitor all your driver data</p>
                    </b>
                  </div>
                <div style=" padding: 20px; margin-top: 50px;" class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav d-flex align-items-center navbar-light ml-auto">
                        <li class="dropdown">
                            <a href="#" data-toggle="dropdown" class="nav-link dropdown-toggle nav-link-lg nav-link-user">
                                <div id="profile-container" class="d-flex align-items-center">
                                    <div id="profile-picture" class="avatar mr-1"></div>
                                    <div class="d-none d-md-block d-lg-inline-block" id="user-name"></div>
                                </div>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a class="dropdown-item" href="profile.html"><i data-feather="user"></i> Account</a>
                                <a class="dropdown-item active" href="#"><i data-feather="mail"></i> Messages</a>
                                <a class="dropdown-item" href="#"><i data-feather="settings"></i> Settings</a>
                                <div class="dropdown-divider"></div>
                                <button class="dropdown-item" onclick="logout()"><i data-feather="log-out"></i> Logout</button>
                            </div>
                        </li>
                    </ul>
                </div>
                
            </nav>
            
                 <!-- HEADER TABEL -->
    <div class="table-header-container">
        <div class="table-header">
            <span class="header-item" style="width: 20%;">Driver Photo & Name</span>
            <span class="header-item" style="width: 15%;">Vehicle Used</span>
            <span class="header-item" style="width: 20%;">Employment Status</span>
            <span class="header-item" style="width: 15%;">Driving Behavior</span>
            <span class="header-item" style="width: 15%;">Today's Expenses</span>
            <span class="header-item" style="width: 15%;">Vehicle Status</span>
        </div>
         <!-- TABEL DATA -->
    <div class="mt-2" style="border: #E6EDFF ;" >
        <div style="overflow-x:auto;">
            <table id="driver-table" style="width: 100%; border-collapse: separate; border-spacing: 0; background-color: #fff; border-top: 2px solid #E6EDFF; border-bottom: 2px solid #E6EDFF; border-radius: 12px;">
                <tbody></tbody>
            </table>
        </div>
    </div>
    </div>
   
    </div>
   <!-- Overlay Div -->
   <div id="overlay" class="overlay" onclick="closeOverlay()">
    <div class="overlay-content" onclick="event.stopPropagation()">
        <div class="userdat">
            <img src="assets/images/UserDataPic.svg" alt="User Image" class="user-image">
            <div class="usernamedat h4-bold">
                <h4>Hellyos Haqiqie</h4>
                <p>Driver Polestar A1</p>
                <p>349214</p>
            </div>
        </div>
        <!-- Table Section -->
        <div class="table-container">
            <table class="custom-table">
                <tr>
                    <td>
                        <div class="table-cell-content">
                            <img src="assets/images/UserDatNumber.svg" alt="" class="icon">
                            <p class="text">(+62) 882009061186</p>
                        </div>
                    </td>
                    <td>
                        <div class="table-cell-content">
                            <img src="assets/images/UserDatEmail.svg" alt="" class="icon">
                            <p class="text"><a style="color: #7F8489;" href="mailto:Hellyoshaqiqie9@gmail.com">Hellyoshaqiqie9@gmail.com</a></p>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="table-cell-content">
                            <img src="assets/images/UserDatLoc.svg" alt="" class="icon">
                            <p class="text">Kediri, Jawa Timur</p>
                        </div>
                    </td>
                    <td>
                        <div class="table-cell-content">
                            <img src="assets/images/UserDatOnline.svg" alt="" class="icon">
                            <p class="text">Polestar A1 is <span class="online">online</span></p>
                        </div>
                    </td>
                </tr>
                <!-- Add more rows as needed -->
            </table>
        </div>
        <!-- Navbar Section -->
        <div class="navbar">
            <ul class="navbar-list">
                <li class="navbar-item" data-target="personal"><a href="#personal">Personal</a></li>
                <li class="navbar-item" data-target="log-behavior"><a href="#log-behavior">Log behavior</a></li>
                <li class="navbar-item" data-target="expenses"><a href="#expenses">Expenses</a></li>
                <li class="navbar-item" data-target="vehicle"><a href="#vehicle">Vehicle</a></li>
                <li class="navbar-item" data-target="documents"><a href="#documents">Documents</a></li>
            </ul>
        </div>
        <!-- Content Section -->
        <div class="navbar-content">



            <div id="personal" class="content-section">
                <div class="head-content">
                    <h5>General Information</h5>
                    <button style="border: none; background: none; padding: 0; cursor: pointer; outline: none;">
                        <img src="assets/images/BtnEditContent.svg" alt="Edit">
                    </button>
                </div> 
                <div class="content-personal">
                    <div class="personal-content">
                        <div class="left-personal-content">
                            <div class="content-personal-data">
                                <div class="content-personal-data-Nama">
                                    <h5>Nama</h5>
                                    <p>-</p> <!-- Akan diupdate dengan data dari Firebase -->
                                </div>
                                <div class="content-personal-data-Joining_Date">
                                    <h5>Joining Date</h5>
                                    <p>-</p> <!-- Akan diupdate dengan data dari Firebase -->
                                </div>
                                <div class="content-personal-data-Address">
                                    <h5>Address</h5>
                                    <p>-</p> <!-- Akan diupdate dengan data dari Firebase -->
                                </div>
                                <div class="content-personal-data-Working_Hours">
                                    <h5>Working Hours</h5>
                                    <p>8 Hours</p> <!-- Dummy data -->
                                </div>
                                <div class="content-personal-data-Email">
                                    <h5>Email</h5>
                                    <p>-</p> <!-- Akan diupdate dengan data dari Firebase -->
                                </div>
                                <div class="content-personal-data-Phone_Number">
                                    <h5>Phone Number</h5>
                                    <p>-</p> <!-- Akan diupdate dengan data dari Firebase -->
                                </div>
                            </div>
                        </div>
                        <div class="right-personal-content">
                            <div class="content-personal-data">
                                <div class="content-personal-data-Contract_type">
                                    <h5>Contract Type</h5>
                                    <p>-</p> <!-- Akan diupdate dengan data dari Firebase -->
                                </div>
                                <div class="content-personal-data-salary">
                                    <h5>Salary</h5>
                                    <p>-</p> <!-- Akan diupdate dengan data dari Firebase -->
                                </div>
                                <div class="content-personal-data-Start_Date">
                                    <h5>Start Date</h5>
                                    <p>3 July, 2023</p> <!-- Dummy data -->
                                </div>
                                <div class="content-personal-data-End_Date">
                                    <h5>End Date</h5>
                                    <p>8 July, 2025</p> <!-- Dummy data -->
                                </div>
                                <div class="content-personal-data-Performance_Ratings">
                                    <h5>Performance Ratings</h5>
                                    <p>Good</p> <!-- Dummy data -->
                                </div>
                                <div class="content-personal-data-Driving_Experience">
                                    <h5>Driving Experience</h5>
                                    <p>5 years</p> <!-- Dummy data -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="log-behavior" class="content-section">
                <div class="head-content">
                    <h5>Log Behavior</h5>    
                </div>
                <div class="content-log">
                    <div class="LT-Data">
                        <div class="LTDat">
                            <div class="trip-item">
                                <div class="trip-date">29 jan, 2024</div>
                                <div class="trip-content">
                                    <div class="trip-details">
                                        <div class="time-location">
                                            <img src="assets/images/Pointer.svg" alt="Pointer" class="icon">
                                            <span class="time"><strong>20.00</strong></span>
                                            <div class="log-trip">
                                                <span class="location">Tulungagung, Kalidawir</span>
                                                <span class="vehicle-name">Over Speed</span>
                                            </div>
                                        </div>
                                        <div class="dotted-line"></div>
                                        <div class="time-location">
                                            <img src="assets/images/Location.svg" alt="Location" class="icon">
                                            <span class="time"><strong>21.32</strong></span>
                                            <div class="log-trip">
                                                <span class="location">Kediri, Kediri Kota</span>
                                                <span class="distance">Reached <span class="distance-dat">172 Km/H</span></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="horizontal-line"></div>
                            </div>
                            <div class="trip-item">
                                <div class="trip-date">2 Feb, 2024</div>
                                <div class="trip-content">
                                    <div class="trip-details">
                                        <div class="time-location">
                                            <img src="assets/images/Pointer.svg" alt="Pointer" class="icon">
                                            <span class="time"><strong>20.30</strong></span>
                                            <div class="log-trip">
                                                <span class="location">Tulungagung, Kedungwaru</span>
                                                <span class="vehicle-name">Over Speed</span>
                                            </div>
                                        </div>
                                        <div class="dotted-line"></div>
                                        <div class="time-location">
                                            <img src="assets/images/Location.svg" alt="Location" class="icon">
                                            <span class="time"><strong>21.53</strong></span>
                                            <div class="log-trip">
                                                <span class="location">Kediri, Kediri Kota</span>
                                                <span class="distance">Reached <span class="distance-dat">141 Km/H</span></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="horizontal-line"></div>
                            </div>
                            <div class="trip-item">
                                <div class="trip-date">3 Feb, 2024</div>
                                <div class="trip-content">
                                    <div class="trip-details">
                                        <div class="time-location">
                                            <img src="assets/images/Pointer.svg" alt="Pointer" class="icon">
                                            <span class="time"><strong>20.00</strong></span>
                                            <div class="log-trip">
                                                <span class="location">Tulungagung, Kalidawir</span>
                                                <span class="vehicle-name">Over Speed</span>
                                            </div>
                                        </div>
                                        <div class="dotted-line"></div>
                                        <div class="time-location">
                                            <img src="assets/images/Location.svg" alt="Location" class="icon">
                                            <span class="time"><strong>21.32</strong></span>
                                            <div class="log-trip">
                                                <span class="location">Kediri, Kediri Kota</span>
                                                <span class="distance">Reached <span class="distance-dat">185 Km/H</span></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="horizontal-line"></div>
                            </div>
                            <div class="trip-item">
                                <div class="trip-date">5 Feb, 2024</div>
                                <div class="trip-content">
                                    <div class="trip-details">
                                        <div class="time-location">
                                            <img src="assets/images/Pointer.svg" alt="Pointer" class="icon">
                                            <span class="time"><strong>20.00</strong></span>
                                            <div class="log-trip">
                                                <span class="location">Tulungagung, Kalidawir</span>
                                                <span class="vehicle-name">Over Speed</span>
                                            </div>
                                        </div>
                                        <div class="dotted-line"></div>
                                        <div class="time-location">
                                            <img src="assets/images/Location.svg" alt="Location" class="icon">
                                            <span class="time"><strong>21.32</strong></span>
                                            <div class="log-trip">
                                                <span class="location">Kediri, Kediri Kota</span>
                                                <span class="distance">Reached <span class="distance-dat">153 Km/H</span></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="horizontal-line"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
            <div id="expenses" class="content-section">
                <div class="head-content">
                    <h5>Transactions history</h5>
                    <button class="toggle-button" id="toggleButton">weekly</button>    
                </div>
                <div class="expanse-content">
                    <div class="expanse-table-wrapper">
                        <table class="expanse-table">
                            <thead>
                                <tr>
                                    <th>Name ⇅</th>
                                    <th>Type</th>
                                    <th>Date ⇅</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                        </table>
                        <div class="expanse-table-body-wrapper">
                            <table class="expanse-table">
                                <tbody>
                                    <tr>
                                        <td>Fried Rice</td>
                                        <td class="type-expanse">Consumption</td>
                                        <td>21, Oct, 2023<br><span class="time-expanse">10.42 PM</span></td>
                                        <td>Rp32.000</td>
                                    </tr>
                                    <tr>
                                        <td>Fried Rice</td>
                                        <td class="type-expanse">Consumption</td>
                                        <td>21, Oct, 2023<br><span class="time-expanse">10.42 PM</span></td>
                                        <td>Rp32.000</td>
                                    </tr>
                                    <tr>
                                        <td>Fried Rice</td>
                                        <td class="type-expanse">Consumption</td>
                                        <td>21, Oct, 2023<br><span class="time-expanse">10.42 PM</span></td>
                                        <td>Rp32.000</td>
                                    </tr>
                                    <tr>
                                        <td>Fried Rice</td>
                                        <td class="type-expanse">Consumption</td>
                                        <td>21, Oct, 2023<br><span class="time-expanse">10.42 PM</span></td>
                                        <td>Rp32.000</td>
                                    </tr>
                                    <tr>
                                        <td>Fried Rice</td>
                                        <td class="type-expanse">Consumption</td>
                                        <td>21, Oct, 2023<br><span class="time-expanse">10.42 PM</span></td>
                                        <td>Rp32.000</td>
                                    </tr>
                                    <tr>
                                        <td>Fried Rice</td>
                                        <td class="type-expanse">Consumption</td>
                                        <td>21, Oct, 2023<br><span class="time-expanse">10.42 PM</span></td>
                                        <td>Rp32.000</td>
                                    </tr>
                                    <tr>
                                        <td>Fried Rice</td>
                                        <td class="type-expanse">Consumption</td>
                                        <td>21, Oct, 2023<br><span class="time-expanse">10.42 PM</span></td>
                                        <td>Rp32.000</td>
                                    </tr>
                                    <tr>
                                        <td>Fried Rice</td>
                                        <td class="type-expanse">Consumption</td>
                                        <td>21, Oct, 2023<br><span class="time-expanse">10.42 PM</span></td>
                                        <td>Rp32.000</td>
                                    </tr>
                                    <!-- Tambahkan baris data lainnya seperti di atas -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    
                    <div class="expanse-data">
                        <div class="total-expanse">
                            <h5>Total Expanse</h5>
                            <p>Driver Expenses Total Record</p>
                            <h4></h4>
                        </div>
                        <div class="expanse-detail">
                            <div class="expanse-detail-head">
                                <h5>Expanses</h5>
                                <p>Driver Expenses Detail</p>
                            </div>
                            <div class="expanse-detail-content">
                                
                                
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
            <div id="vehicle" class="content-section">
                <div class="head-content">
                    <h5>Vehicle</h5>    
                </div>
                <div class="vehicle-content">
                    <div class="content_Vehicle">
                        <div class="vehicle_list">
                            <div class="list-dat active-veh">
                                <div class="list-img ">
                                    <img src="assets/images/doc_vehlist.svg" alt="">
                                </div>
                                
                                <div class="list-detail">
                                    <h5>Volvo Polestar A1</h5>
                                    <p>Volvo Polestar 1</p>
                                </div>
                            </div>
                            <div class="list-dat">
                                <div class="list-img ">
                                    <img src="assets/images/doc_vehlist.svg" alt="">
                                </div>
                                
                                <div class="list-detail">
                                    <h5>AMG GT R A1</h5>
                                    <p>Mercedes-Benz </p>
                                </div>
                            </div>
                            <div class="line-space"></div>
                            <div class="list-dat">
                                <div class="list-img ">
                                    <img src="assets/images/doc_vehlist.svg" alt="">
                                </div>
                                
                                <div class="list-detail">
                                    <h5>Avanza A2</h5>
                                    <p>Toyota</p>
                                </div>
                            </div>
                            <div class="line-space"></div>
                            <div class="list-dat">
                                <div class="list-img ">
                                    <img src="assets/images/doc_vehlist.svg" alt="">
                                </div>
                                
                                <div class="list-detail">
                                    <h5>Calya A1</h5>
                                    <p>Toyota</p>
                                </div>
                            </div>
                            <div class="line-space"></div>
                            <div class="list-dat">
                                <div class="list-img ">
                                    <img src="assets/images/doc_vehlist.svg" alt="">
                                </div>
                                
                                <div class="list-detail">
                                    <h5>BMW M4</h5>
                                    <p>BMW </p>
                                </div>
                            </div>
                            <div class="line-space"></div>
                            



                        </div>

                        <div class="vehicle_details">
                            <div class="details_vehicle">
                                <div class="vehicle_expanse">
                                    <div class="expanse_head">
                                        <div class="tittle_expanse_head">
                                            <h4>Volvo, Polestar 1</h4>
                                            <p>Vehicle Expenses <span>/ 23, Oct, 2021</span></p>
                                        </div>

                                        <div>
                                            <button class="toggle-button" id="toggleButton">weekly</button>

                                            <script>
                                                const toggleButton = document.getElementById('toggleButton');
                                                const states = ['weekly', 'monthly', 'yearly'];
                                                let currentIndex = 0;

                                                toggleButton.addEventListener('click', () => {
                                                    currentIndex = (currentIndex + 1) % states.length;
                                                    toggleButton.textContent = states[currentIndex];
                                                });
                                            </script>

                                        </div>
                                        
                                        
                                    </div>

                                    <div class="expanse_data">
                                        <div class="expanse_dat">
                                            <div class="left-expanse_dat">
                                                <div class="data_expanse">
                                                    <div class="dat-exp">
                                                    <h5>Gas Station</h5>
                                                    <p>Rp.900.000</p>
                                                    </div>
                                                    <div class="dat-exp">
                                                        <h5>Highway</h5>
                                                        <p>Rp.760.000</p>
                                                        </div>
                                                        <div class="dat-exp">
                                                            <h5>ERP</h5>
                                                            <p>Rp.210.000</p>
                                                            </div>
                                                </div>
                                            </div>
                                            <div class="right-expanse_dat">
                                                <div class="data_expanse">
                                                    <div class="dat-exp">
                                                    <h5>Car Wash</h5>
                                                    <p>Rp.54.000</p>
                                                    </div>
                                                    <div class="dat-exp">
                                                        <h5>Parking</h5>
                                                        <p>Rp.75.000</p>
                                                        </div>
                                                        <div class="dat-exp">
                                                            <h5>Vehicle Tax</h5>
                                                            <p>Rp.2.000.000</p>
                                                            </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="expanse_img">
                                            <img src="assets/images/carExpanse.svg" alt="" srcset="">
                                        </div>
                                    </div>
                                </div>
                                <div class="vehicle_record">
                                    <div class="tittle_expanse_head">
                                        <p>Driver Violation Record</p>
                                    </div>
                                    <div class="expanse_data">
                                        <div class="expanse_dat">
                                            <div class="left-expanse_dat">
                                                <div class="data_expanse">
                                                    <div class="dat-exp">
                                                    <h5>Traffic Ticket</h5>
                                                    <p>Rp.512.000</p>
                                                    </div>
                                                    <div class="dat-exp">
                                                        <h5>Repairing</h5>
                                                        <p>Rp.5.412.000</p>
                                                        </div>
                                                        <div class="dat-exp">
                                                            <h5>Driving Behavior</h5>
                                                            <p class="online">Safe</p>
                                                            </div>
                                                </div>
                                            </div>
                                            
                                        </div>
                                        <div class="expanse_img">
                                            <img src="assets/images/carDriver.svg" alt="" srcset="">
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="documents" class="content-section">
                <div class="head-content">
                    <h5>Documents</h5>
                    <button style="border: none; background: none; padding: 0; cursor: pointer; outline: none;">
                        <img src="assets/images/BtnEditContent.svg" alt="Edit">
                      </button>
                </div>
                
                <div class="cards-container">
                    <div class="card-doc" onclick="showOverlay('Driver License', 'Nomor Lisensi: 12345678<br>Tanggal Kadaluarsa: 12/12/2025')">
                        <div class="card-doc-content">
                            <div class="card-doc-title">Driver License</div>
                            <div class="card-doc-description">Attached</div>
                        </div>
                        <button style="border: none; background: none; padding: 0; cursor: pointer; outline: none;">
                            <img src="assets/images/btnDocument.svg" alt="Edit">
                        </button>
                    </div>
                
                    <div class="card-doc" onclick="showOverlay('VeCard', 'Nomor VeCard: 87654321<br>Status: Active')">
                        <div class="card-doc-content">
                            <div class="card-doc-title">VeCard</div>
                            <div class="card-doc-description">Attached</div>
                        </div>
                        <button style="border: none; background: none; padding: 0; cursor: pointer; outline: none;">
                            <img src="assets/images/btnDocument.svg" alt="Edit">
                        </button>
                    </div>
                
                    <div class="card-doc" onclick="showOverlay('Indonesia Identity Card', 'Nomor KTP: 11223344<br>Status: Pending')">
                        <div class="card-doc-content">
                            <div class="card-doc-title">Indonesia Identity Card</div>
                            <div class="card-doc-description">Pending</div>
                        </div>
                        <button style="border: none; background: none; padding: 0; cursor: pointer; outline: none;">
                            <img src="assets/images/btnDocument.svg" alt="Edit">
                        </button>
                    </div>
                </div>
                
                <div class="card-doc-overlay" id="cardDocOverlay" onclick="hideOverlay(event)">
                    <div class="card-doc-overlay-content" id="overlayContent">
                        <button class="close-btn" onclick="hideOverlay(event)">✖</button>
                        <p>Ini adalah konten overlay.</p>
                    </div>
                </div>
                
                
                <script>
                   function showOverlay(title, content, imageUrl) {
                    const overlay = document.getElementById('cardDocOverlay');
                    const overlayContent = document.getElementById('overlayContent');
                    
                    overlayContent.innerHTML = `
                        <button class="close-btn" onclick="hideOverlay(event)">✖</button>
                        <div class="overlay-text">
                            <h2>${title}</h2>
                            <p>${content}</p>
                        </div>
                        <div class="overlay-image-container">
                            <img src="${imageUrl}" alt="${title}">
                        </div>`;
                        
                    overlay.classList.add('show');
                }

                    // Menyembunyikan overlay
                    function hideOverlay(event) {
                        const overlay = document.getElementById('cardDocOverlay');
                        if (event.target === overlay || event.target.classList.contains('close-btn')) {
                            overlay.classList.remove('show');
                        }
                    }

                    
                </script>
                

            </div>
            
            
        </div>



            </div>
        </div>


    
    
    <script src="js/UserAndStatus_check.js"></script>

    <div class="add-driver-btn" onclick="openCustomForm()">
        <img src="assets/images/btn-AddNewDriver.svg" alt="Add New Driver">
    </div>
    
    <div class="add-driver-btn" onclick="openCustomForm()">
        <img src="assets/images/btn-AddNewDriver.svg" alt="Add New Driver">
    </div>
    
    <form id="driver-form">
        <div class="custom-form-container">
            <div class="custom-form-page custom-form-page-1">
                <h2>Your Driver Data</h2>
                <input type="text" id="full-name" name="fullName" placeholder="Full Name" required>
                <input type="text" name="address" placeholder="Address" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="number" name="phoneNumber" placeholder="Phone Number" pattern="\d*" title="Please enter a valid phone number" required>
            
                <div class="custom-date-input">
                    <input type="text" id="date-of-birth" name="dateOfBirth" placeholder="Date Of Birth" onfocus="(this.type='date')" onblur="if(this.value==''){this.type='text'}" required>
                </div>

                <input type="number" name="emergencyContact" placeholder="Emergency Contact (Optional)" pattern="\d*">
                <!-- Driver Photo -->
                <div class="custom-input-file">
                    <input type="file" id="driver-photo-input" name="driverPhoto" hidden>
                    <label for="driver-photo-input">
                        <img id="input-icon" src="assets/images/Input-vehpic.svg" alt="">
                    </label>
                    <span id="file-chosen">Driver Photo (Optional)</span>
                </div>
                <button type="button" id="nextFormBtn" class="custom-next-button" >Next</button>
                <div class="formStats">
                    <img src="assets/images/DriverForm1.svg" alt="">
                </div>
            </div>
    
            <div class="custom-form-page custom-form-page-2">
                <h2>Your Driver Data</h2>
                <input type="text" name="nationalIdNumber" placeholder="National ID Number (Optional)" pattern="\d*">
                <!-- National ID Picture -->
                <div class="custom-input-file">
                    <input type="file" id="national-id-input" name="nationalIdPhoto" hidden>
                    <label for="national-id-input">
                        <img id="national-id-icon" src="assets/images/Input-vehpic.svg" alt="">
                    </label>
                    <span id="national-id-file-chosen">National ID Picture (Optional)</span>
                </div>
                <select name="employmentType" id="Employment" required>
                    <option value="" disabled selected hidden>Employment Type</option>
                    <option value="Full-Time">Full-Time</option>
                    <option value="Part-Time">Part-Time</option>
                </select>
                <input type="text" list="vehicles" id="vehicle" name="vehicleUsed" placeholder="Vehicle Used" required>
                <datalist id="vehicles">
                    <!-- Options will be populated here -->
                </datalist>
                <!-- Driving License -->
                <!-- Salary -->
            <input type="number" name="salary" placeholder="Salary (Optional)" pattern="\d*">
                <div class="custom-input-file">
                    <input type="file" id="driving-license-input" name="drivingLicensePhoto" hidden>
                    <label for="driving-license-input">
                        <img id="driving-license-icon" src="assets/images/Input-vehpic.svg" alt="">
                    </label>
                    <span id="driving-license-file-chosen">Driving License (Optional)</span>
                </div>
                <!-- Employee Card -->
                <div class="custom-input-file">
                    <input type="file" id="employee-card-input" name="employeeCardPhoto" hidden>
                    <label for="employee-card-input">
                        <img id="employee-card-icon" src="assets/images/Input-vehpic.svg" alt="">
                    </label>
                    <span id="employee-card-file-chosen">Employee Card (Optional)</span>
                </div>
                <div class="form-options">
                    <button type="button" class="Form-PreviousBtn" onclick="prevCustomForm()">Previous</button>
                    <input type="submit" class="Form-ConfirmBtn" value="Confirm">
                </div>
                <div class="formStats">
                    <img src="assets/images/DriverForm2.svg" alt="">
                </div>
            </div>
        </div>
        <div class="custom-dim-bg"></div>
    </form>

    <script type="module">
        import { getDatabase, ref as dbRef, set, onValue, push } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";
        import { getStorage, ref as storageRef, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-storage.js";
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
        import { getAuth, onAuthStateChanged  } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js"; // Import Firebase Authentication
        
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB9qUzLViR5uALw9Qf_xzJpd20acoV0FEs",
            authDomain: "velinked-web.firebaseapp.com",
            databaseURL: "https://velinked-web-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "velinked-web",
            storageBucket: "velinked-web.appspot.com",
            messagingSenderId: "844821073092",
            appId: "1:844821073092:web:f243c25668079240ec0d91",
            measurementId: "G-CLGQ4RWWTX"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const storage = getStorage(app);
        const auth = getAuth(app); // Initialize Firebase Authentication
        
        // Utility functions for popup notifications
        function showPopup(message, type = 'info') {
            const popup = document.getElementById('popup');
            popup.className = `popup ${type}`;
            popup.innerText = message;
            popup.style.display = 'block';
            setTimeout(() => {
                popup.style.display = 'none';
            }, 5000);
        }

         // Ambil driverId dari URL
         function getDriverIdFromUrl() {
    const urlParams = new URLSearchParams(window.location.hash.substring(1));
    return urlParams.get('driverId');
}



    function loadDocData(driverId, docType) {
    const driverRef = dbRef(db, `Drivers/${driverId}`);
    onValue(driverRef, (snapshot) => {
        const data = snapshot.val();
        let imageUrl;

        switch (docType) {
            case 'Driver License':
                imageUrl = data.drivingLicensePhotoUrl;
                break;
            case 'VeCard':
                imageUrl = data.employeeCardPhotoUrl;
                break;
            case 'Indonesia Identity Card':
                imageUrl = data.nationalIdPhotoUrl;
                break;
            default:
                imageUrl = '';
                break;
        }

        if (imageUrl) {
            showOverlay(docType, `Detail dari ${docType}`, imageUrl);
        } else {
            showOverlay(docType, `Gambar tidak tersedia untuk ${docType}`, '');
        }
    }, {
        onlyOnce: true
    });
}
    // Event listener untuk masing-masing card
    document.querySelectorAll('.card-doc').forEach(card => {
                        card.addEventListener('click', () => {
                            const driverId = getDriverIdFromUrl();
                            const docType = card.querySelector('.card-doc-title').textContent;
                            loadDocData(driverId, docType);
                        });
                    });


        function loadPersonalData(driverId) {
    const driverRef = dbRef(db, `Drivers/${driverId}`);
    onValue(driverRef, (snapshot) => {
        const driverData = snapshot.val();
        if (driverData) {
            // Format and set data
            
            document.querySelector('.content-personal-data-Nama p').textContent = driverData.fullName || '-';
            document.querySelector('.content-personal-data-Joining_Date p').textContent = formatDate(driverData.joinDate) || '-';
            document.querySelector('.content-personal-data-Address p').textContent = driverData.address || '-';
            document.querySelector('.content-personal-data-Email p').textContent = driverData.email || '-';
            document.querySelector('.content-personal-data-Phone_Number p').textContent = driverData.phoneNumber || '-';
            document.querySelector('.content-personal-data-Contract_type p').textContent = driverData.employmentType || '-';
            document.querySelector('.content-personal-data-salary p').textContent = formatCurrency(driverData.salary) || '-';

            // Dummy data for the rest
            document.querySelector('.content-personal-data-Working_Hours p').textContent = '8 Hours';
            document.querySelector('.content-personal-data-Start_Date p').textContent = '3 July, 2023';
            document.querySelector('.content-personal-data-End_Date p').textContent = '8 July, 2025';
            document.querySelector('.content-personal-data-Performance_Ratings p').textContent = 'Good';
            document.querySelector('.content-personal-data-Driving_Experience p').textContent = '5 years';
        } else {
            console.error('Driver data not found');
        }
    });
}


function formatDate(dateString) {
    if (!dateString) return '-';
    const date = new Date(dateString);
    const options = { day: 'numeric', month: 'short', year: 'numeric' };
    return date.toLocaleDateString('en-GB', options); // e.g., "3 Jan, 2022"
}

function formatCurrency(amount) {
    if (!amount) return '-';
    return `Rp${parseInt(amount).toLocaleString('id-ID')}`; // e.g., "Rp.4.050.000"
}












        
// Function to fetch driver and vehicle data
function fetchData(uid) {
    const driversRef = dbRef(db, 'Drivers');
    onValue(driversRef, (snapshot) => {
        const data = snapshot.val();
        const drivers = Object.entries(data) // Use Object.entries to get both key and value
            .filter(([key, driver]) => driver.userId === uid);

        const table = document.getElementById('driver-table');
        table.innerHTML = ''; // Clear existing data

        drivers.forEach(([driverId, driver], index) => {
            const vehicleRef = dbRef(db, `Vehicle/${driver.vehicleUsed}`);
            
            onValue(vehicleRef, (vehicleSnapshot) => {
                const vehicleData = vehicleSnapshot.val();
                const isOdd = index % 2 === 0;
                const rowClass = isOdd ? 'table-row-odd' : 'table-row-even';
                const driverPhotoUrl = driver.driverPhotoUrl || 'assets/images/userDummyExpanse.svg';
                let vehicleStatus;

                if (vehicleData && vehicleData.status_device !== undefined) {
                    vehicleStatus = vehicleData.status_device === true ? 'Online' : 'Offline';
                } else {
                    vehicleStatus = 'Not Connected';
                }

                // Find the existing row if it exists
                let row = document.querySelector(`tr[data-driver-id="${driverId}"]`);

                if (!row) {
                    // Create new row if it doesn't exist
                    row = document.createElement('tr');
                    row.className = rowClass;
                    row.setAttribute('data-driver-id', driverId);
                    row.onclick = () => {
                        // Update URL hash with driverId
                        window.history.pushState({}, '', `#driverId=${driverId}`);
                        openOverlay(driverId);

                    };
                    table.appendChild(row);
                } else {
                    // Update the row class for row-odd and row-even
                    row.className = rowClass;
                }

                // Update row content
                row.innerHTML = `
                    <td class="table-data username" style="width: 20%;">
                        <img src="${driverPhotoUrl}" alt="Driver Photo" class="driver-photo">
                        <span>${driver.fullName}</span>
                    </td>
                    <td class="table-data" style="width: 15%;">${vehicleData?.nickname || 'N/A'}</td>
                    <td class="table-data" style="width: 20%;">${driver.employmentType}</td>
                    <td class="table-data" style="width: 15%;">Safe</td> <!-- Dummy Data -->
                    <td class="table-data" style="width: 15%;">Rp. 243 K</td> <!-- Dummy Data -->
                    <td class="table-data ${vehicleData?.status_device === true ? 'online' : ''}" style="width: 15%;">
                        ${vehicleStatus}
                    </td>
                `;
            });
        });
    });
}

// Check user authentication and fetch data
onAuthStateChanged(auth, (user) => {
    if (user) {
        fetchData(user.uid);
    } else {
        console.log('User is not logged in');
    }
});


// Function to fetch and calculate total expanse based on driverId
function fetchDriverExpenses(driverId) {
    const expensesRef = dbRef(db, 'Expenses');
    
    onValue(expensesRef, (snapshot) => {
        const data = snapshot.val();
        let totalExpanse = 0;

        // Filter and calculate total price for expenses with matching driverId
        Object.values(data).forEach(expense => {
            if (expense.driverId === driverId) {
                totalExpanse += Number(expense.price) || 0; // Convert price to number and add to total
            }
        });

        // Update the total expanse in the HTML
        const totalExpanseElement = document.querySelector('.total-expanse h4');
        totalExpanseElement.textContent = formatCurrency(totalExpanse);
    });
}





// Function to fetch and calculate expenses by type for a specific driver
function fetchExpensesByType(driverId) {
    const expensesRef = dbRef(db, 'Expenses');
    
    onValue(expensesRef, (snapshot) => {
        const data = snapshot.val();
        const expensesByType = {};

        // Group expenses by type and calculate total price for each type
        Object.values(data).forEach(expense => {
            if (expense.driverId === driverId) {
                if (!expensesByType[expense.type]) {
                    expensesByType[expense.type] = 0;
                }
                expensesByType[expense.type] += Number(expense.price) || 0; // Convert price to number and sum it up
            }
        });

        // Insert grouped data into HTML
        const expanseDetailContent = document.querySelector('.expanse-detail-content');
        expanseDetailContent.innerHTML = ''; // Clear previous content

        let index = 0;

        // Loop through each expense type and total price
        Object.keys(expensesByType).forEach((type) => {
            const total = expensesByType[type];
            const itemClass = index % 2 === 0 ? 'left' : 'right'; // Alternate between left and right
            
            // Create the expense item element
            const expenseItem = document.createElement('div');
            expenseItem.className = `expense-item ${itemClass}`;
            expenseItem.innerHTML = `
                <span class="expense-type ${type.toLowerCase()}">${type}</span>
                <span class="expense-value">${formatCurrency(total)}</span>
            `;

            // Append the expense item to the container
            expanseDetailContent.appendChild(expenseItem);
            index++;
        });
    });
}







function openOverlay(driverId) {
    document.getElementById('overlay').style.display = 'block';
    document.querySelector('.add-driver-btn').style.display = 'none';

    // Fetch driver data to populate the overlay
    const driverRef = dbRef(db, `Drivers/${driverId}`);
    onValue(driverRef, (snapshot) => {
        const driverData = snapshot.val();
        if (driverData) {
            // Set driver photo and name
            document.querySelector('.user-image').src = driverData.driverPhotoUrl || 'assets/images/userDummyExpanse.svg';
            document.querySelector('.usernamedat h4').textContent = driverData.fullName;

            // Fetch vehicle data to get the nickname and name
            const vehicleRef = dbRef(db, `Vehicle/${driverData.vehicleUsed}`);
            onValue(vehicleRef, (vehicleSnapshot) => {
                const vehicleData = vehicleSnapshot.val();
                if (vehicleData) {
                    loadPersonalData(driverId);
                    fetchDriverExpenses(driverId);
                    fetchExpensesByType(driverId);
                    document.querySelector('.usernamedat p').textContent = vehicleData.nickname;
                    document.querySelector('.userdat p:nth-of-type(2)').textContent = vehicleData.name; // Update the second <p> element with the field 'name'
                } else {
                    console.error('Vehicle data not found');
                }
            });
        } else {
            console.error('Driver data not found');
        }
    });
}





















        // Check if user is logged in
        auth.onAuthStateChanged((user) => {
            if (!user) {
                // Redirect to login page if not logged in
                window.location.href = 'login.html';
            } else {
                // Proceed with the rest of the code if user is logged in
                // Fetch and populate vehicles datalist from Realtime Database
                const vehiclesDatalist = document.getElementById('vehicles');
                const vehiclesRef = dbRef(db, 'Vehicle');
                let vehicleMap = {};
                
                onValue(vehiclesRef, (snapshot) => {
                    vehiclesDatalist.innerHTML = '';
                    vehicleMap = {};
                    snapshot.forEach((childSnapshot) => {
                        const nickname = childSnapshot.val().nickname;
                        const docId = childSnapshot.key;
            
                        const option = document.createElement('option');
                        option.value = nickname;
                        option.setAttribute('data-doc-id', docId);
                        vehiclesDatalist.appendChild(option);
            
                        vehicleMap[nickname] = docId;
                    });
                });
                
                document.getElementById('vehicle').addEventListener('input', function() {
                    const selectedOption = vehiclesDatalist.querySelector(`option[value="${this.value}"]`);
                    if (selectedOption) {
                        this.dataset.docId = selectedOption.getAttribute('data-doc-id');
                    } else {
                        delete this.dataset.docId;
                    }
                });
                
                // Validate vehicleUsed and handle form submission
                document.getElementById('driver-form').addEventListener('submit', function(event) {
                    event.preventDefault();
            
                    const formData = new FormData(this);
                    const selectedNickname = formData.get('vehicleUsed');
                    const vehicleDocId = vehicleMap[selectedNickname] || null;
            
                    if (!vehicleDocId) {
                        showPopup('Invalid vehicle selected. Please choose a valid vehicle.', 'error');
                        return;
                    }
            
                    // Show processing popup
                    showPopup('Processing data, please wait...', 'info');
            
                    const fullName = formData.get('fullName');
                    const driverPhotoFile = formData.get('driverPhoto');
                    const nationalIdPhotoFile = formData.get('nationalIdPhoto');
                    const drivingLicensePhotoFile = formData.get('drivingLicensePhoto');
                    const employeeCardPhotoFile = formData.get('employeeCardPhoto');
                    const salary = formData.get('salary');
                    
                    // Get user ID from Firebase Authentication
                    const userId = user ? user.uid : 'unknown_user'; // Use 'unknown_user' if no user is logged in
                    
                    const uploadAndGetUrl = (file, path) => {
                        return new Promise((resolve, reject) => {
                            if (file) {
                                const fileName = `${path}_${Date.now()}_${file.name}`;
                                const storageRefInstance = storageRef(storage, `Driver/images/${fileName}`);
                                const uploadTask = uploadBytesResumable(storageRefInstance, file);
            
                                uploadTask.on('state_changed',
                                    (snapshot) => {
                                        // Handle upload progress if needed
                                    },
                                    (error) => {
                                        reject(error);
                                    },
                                    () => {
                                        getDownloadURL(uploadTask.snapshot.ref).then(resolve).catch(reject);
                                    }
                                );
                            } else {
                                resolve(null);
                            }
                        });
                    };
            
                    Promise.all([
                        uploadAndGetUrl(driverPhotoFile, 'driverPhoto'),
                        uploadAndGetUrl(nationalIdPhotoFile, 'nationalIdPhoto'),
                        uploadAndGetUrl(drivingLicensePhotoFile, 'drivingLicensePhoto'),
                        uploadAndGetUrl(employeeCardPhotoFile, 'employeeCardPhoto')
                    ]).then(([driverPhotoUrl, nationalIdPhotoUrl, drivingLicensePhotoUrl, employeeCardPhotoUrl]) => {
                        const newDriverRef = push(dbRef(db, 'Drivers'));
                        const driverData = {
                            fullName,
                            address: formData.get('address'),
                            email: formData.get('email'),
                            phoneNumber: formData.get('phoneNumber'),
                            dateOfBirth: formData.get('dateOfBirth'),
                            emergencyContact: formData.get('emergencyContact') || null,
                            nationalIdNumber: formData.get('nationalIdNumber') || null,
                            employmentType: formData.get('employmentType'),
                            vehicleUsed: vehicleDocId,
                            salary: formData.get('salary') || null,
                            driverPhotoUrl,
                            nationalIdPhotoUrl,
                            drivingLicensePhotoUrl,
                            employeeCardPhotoUrl,
                            userId, // Add userId field
                            joinDate: Date.now() // Add joinDate field with current timestamp
                        };
                        return set(newDriverRef, driverData);
                    }).then(() => {
                        showPopup('Driver data submitted successfully!', 'success');
                        closeCustomFormIfDataTrue();
                    }).catch((error) => {
                        console.error('Error submitting form: ', error);
                        showPopup('Failed to submit driver data. Please try again.', 'error');
                    }).finally(() => {
                        resetFileInput('driver-photo-input', 'input-icon', 'file-chosen', 'Driver Photo (Optional)');
                        resetFileInput('national-id-input', 'national-id-icon', 'national-id-file-chosen', 'National ID Photo (Optional)');
                        resetFileInput('driving-license-input', 'driving-license-icon', 'driving-license-file-chosen', 'Driving License Photo (Optional)');
                        resetFileInput('employee-card-input', 'employee-card-icon', 'employee-card-file-chosen', 'Employee Card Photo (Optional)');
                    });
                });
            }
        });
    </script>
    
        
        <!-- Popup Notification HTML -->
        <div id="popup" class="popup" style="display:none;"></div>
        
        <!-- Popup Notification CSS -->
        <style>
        .popup {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 5px;
            color: white;
            background-color: #333;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            font-family: Arial, sans-serif;
            font-size: 14px;
            display: none;
        }
        
        .popup.info {
            background-color: #007bff;
        }
        
        .popup.success {
            background-color: #28a745;
        }
        
        .popup.error {
            background-color: #dc3545;
        }
        </style>
        
        
        
        
    


    <div class="custom-dim-bg"></div>
    

    
      
    
        
    <script>
        // Function to handle file input and image preview
        function handleFileInput(inputElement, iconElement, fileChosenElement) {
            const file = inputElement.files[0];
        
            if (file) {
                fileChosenElement.textContent = file.name;
        
                const reader = new FileReader();
                reader.onload = function(e) {
                    iconElement.src = e.target.result;
                    iconElement.style.width = '24px';
                    iconElement.style.height = '24px';
                };
                reader.readAsDataURL(file);
            } else {
                fileChosenElement.textContent = fileChosenElement.getAttribute('data-default-text');
                iconElement.src = 'assets/images/Input-vehpic.svg';
                iconElement.style.width = '';
                iconElement.style.height = '';
            }
        }
                // Function to reset file input to its default state
                function resetFileInput(inputId, iconId, fileChosenId, defaultText) {
            const inputElement = document.getElementById(inputId);
            const iconElement = document.getElementById(iconId);
            const fileChosenElement = document.getElementById(fileChosenId);
        
            // Reset input value
            inputElement.value = '';
        
            // Reset icon and text
            iconElement.src = 'assets/images/Input-vehpic.svg';
            iconElement.style.width = '';
            iconElement.style.height = '';
            fileChosenElement.textContent = defaultText;
        }

        // Attach event listeners to file inputs
        const actualBtn = document.getElementById('driver-photo-input');
        const fileChosen = document.getElementById('file-chosen');
        const inputIcon = document.getElementById('input-icon');
        actualBtn.addEventListener('change', () => handleFileInput(actualBtn, inputIcon, fileChosen));
        
        const nationalIdInput = document.getElementById('national-id-input');
        const nationalIdIcon = document.getElementById('national-id-icon');
        const nationalIdFileChosen = document.getElementById('national-id-file-chosen');
        nationalIdInput.addEventListener('change', () => handleFileInput(nationalIdInput, nationalIdIcon, nationalIdFileChosen));
        
        const drivingLicenseInput = document.getElementById('driving-license-input');
        const drivingLicenseIcon = document.getElementById('driving-license-icon');
        const drivingLicenseFileChosen = document.getElementById('driving-license-file-chosen');
        drivingLicenseInput.addEventListener('change', () => handleFileInput(drivingLicenseInput, drivingLicenseIcon, drivingLicenseFileChosen));
        
        const employeeCardInput = document.getElementById('employee-card-input');
        const employeeCardIcon = document.getElementById('employee-card-icon');
        const employeeCardFileChosen = document.getElementById('employee-card-file-chosen');
        employeeCardInput.addEventListener('change', () => handleFileInput(employeeCardInput, employeeCardIcon, employeeCardFileChosen));
        
        
        
        function closeCustomFormIfDataTrue() {
            document.querySelector('.custom-form-container').style.display = 'none';
            document.querySelector('.custom-dim-bg').style.display = 'none';
            document.querySelector('.add-driver-btn').style.display = 'block';
            
            // Clear form values after closing
            document.getElementById('driver-form').reset();
            resetFileInput('driver-photo-input', 'input-icon', 'file-chosen', 'Driver Photo (Optional)');
            resetFileInput('national-id-input', 'national-id-icon', 'national-id-file-chosen', 'National ID Picture (Optional)');
            resetFileInput('driving-license-input', 'driving-license-icon', 'driving-license-file-chosen', 'Driving License (Optional)');
            resetFileInput('employee-card-input', 'employee-card-icon', 'employee-card-file-chosen', 'Employee Card (Optional)');
            prevCustomForm();
        }
        
        document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('nextFormBtn').addEventListener('click', function() {
        // Seleksi hanya input di dalam custom-form-page-1
        const formPage1 = document.querySelector('.custom-form-page-1');
        const inputs = formPage1.querySelectorAll('input[required]');
        let allFilled = true;

        inputs.forEach(input => {
            if (input.value.trim() === '') {
                allFilled = false;
                input.style.borderColor = 'red'; // Opsional: Memberi warna merah pada border input yang kosong
            } else {
                input.style.borderColor = ''; // Mengembalikan warna border jika input tidak kosong
            }
        });

        if (allFilled) {
            // Jika semua input sudah diisi, lanjut ke form berikutnya
            document.querySelector('.custom-form-page-1').style.display = 'none';
            document.querySelector('.custom-form-page-2').style.display = 'block'; // Pastikan elemen form-page-2 ada di HTML
        } else {
            // Jika ada input yang belum diisi, tampilkan notifikasi
            showPopup('Please fill out all required fields before proceeding.');
        }
    });

    function showPopup(message) {
        const popup = document.getElementById('popup');
        popup.innerText = message;
        popup.style.display = 'block';

        // Sembunyikan popup setelah beberapa detik
        setTimeout(function() {
            popup.style.display = 'none';
        }, 3000); // Popup akan muncul selama 3 detik
    }
});

        
        function prevCustomForm() {
            document.querySelector('.custom-form-page-2').style.display = 'none';
            document.querySelector('.custom-form-page-1').style.display = 'block';
        }
        
        // Custom form display
        function openCustomForm() {
            document.querySelector('.custom-form-container').style.display = 'block';
            document.querySelector('.custom-dim-bg').style.display = 'block';
            document.querySelector('.add-driver-btn').style.display = 'none';
            document.querySelector('.custom-form-page-1').style.display = 'block';
        }
        
        function closeCustomForm() {
            document.querySelector('.custom-form-container').style.display = 'none';
            document.querySelector('.custom-dim-bg').style.display = 'none';
            document.querySelector('.add-driver-btn').style.display = 'block';
            document.querySelector('.custom-form-page-2').style.display = 'none';
            document.querySelector('.custom-form-page-1').style.display = 'none';
        }


// Tutup form jika area di luar form diklik
document.querySelector('.custom-dim-bg').addEventListener('click', closeCustomForm);

    document.addEventListener('DOMContentLoaded', function() {
    const items = document.querySelectorAll('.navbar-item');
    const sections = document.querySelectorAll('.content-section');

    // Function to update active navbar item and show corresponding content
    function updateContent(targetId) {
        items.forEach(item => {
            const id = item.getAttribute('data-target');
            if (id === targetId) {
                item.classList.add('navbar-active');
            } else {
                item.classList.remove('navbar-active');
            }
        });

        sections.forEach(section => {
            if (section.id === targetId) {
                section.classList.add('navbar-active-content');
            } else {
                section.classList.remove('navbar-active-content');
            }
        });
    }

    // On click, update the URL hash and content
    items.forEach(item => {
        item.addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default link behavior
            const targetId = this.getAttribute('data-target');
            window.location.hash = targetId; // Update URL hash
            updateContent(targetId);
        });
    });

    // On page load, show content based on URL hash
    function initContent() {
        const hash = window.location.hash.substring(1); // Remove the '#' character
        if (hash) {
            updateContent(hash);
        } else {
            // Optionally, you can set a default view if there's no hash
            updateContent('personal'); // Example default
        }
    }

    initContent(); // Initialize content based on the URL hash
});





function closeOverlay() {
    document.getElementById('overlay').style.display = 'none';
    document.querySelector('.add-driver-btn').style.display = 'block';
}


    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="assets/js/feather-icons/feather.min.js"></script>
    <script src="assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="assets/js/app.js"></script>
    
    <script src="assets/vendors/chartjs/Chart.min.js"></script>
    <script src="assets/vendors/apexcharts/apexcharts.min.js"></script>
    <script src="assets/js/pages/dashboard.js"></script>

    <script src="assets/js/main.js"></script>
    
    <script src="js/a-auth.js"></script>
    <script src="js/a-pp.js"></script>

  
</body>
</html>
