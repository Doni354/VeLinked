<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="VL/css/details.css">
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Details</title>
    <link rel="shortcut icon" href="assets/images/icon.svg" type="image/x-icon">
    <script defer src="/__/firebase/10.9.0/firebase-app-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-auth-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-database-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-firestore-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-functions-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-messaging-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-storage-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-analytics-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-remote-config-compat.js"></script>
        <script defer src="/__/firebase/10.9.0/firebase-performance-compat.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap">

        <script defer src="/__/firebase/init.js?useEmulator=true"></script>


</head>
<body style="background-color: #F5F4FF;">
    <div class="data">
    <div class="LiveTracking">
        <div class="LTT">
            <p>Live Track</p>

            <div class="map-container">
                <iframe src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3949.7269931177607!2d112.07230607455939!3d-8.12925268137641!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zOMKwMDcnNDUuMyJTIDExMsKwMDQnMjkuNiJF!5e0!3m2!1sid!2sid!4v1716285688598!5m2!1sid!2sid" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </div>

    <div class="veh">
        
        <div class="vehtittle"><p>My Fleet</p></div>
        <div class="vehdata">
            <div class="ShowDetail SlideButton" id="showDetailButton">
                <img src="assets/images/SlideButton.svg" alt="">
            </div>
            <div class="nameveh">
                <div class="vehname"></div>
                <div class="user"><img src="assets/images/userv.svg" alt=""></div>
                
            </div>
            <div class="userdat">
                <div class="nameveh">
                    <div class="vehname"><p>Username</p></div>
                    <div class="user" style=" margin-top: 22px; margin-right: 20px; "><img style="width: 50%;" src="assets/images/back.svg" alt=""></div>
                    
                </div>
                <div class="userdat-stats">
                    <div class="Ustats">
                        <div class="UData">
                            <div class="UDat">IDR.4.200.00</div>
                            <div class="Ustat">Salary</div>
                            <div class="Uview">View</div>
                        </div>
                        <div class="UData">
                            <div class="UDat">A</div>
                            <div class="Ustat">Driving License</div>
                            <div class="Uview">View</div>
                        </div>
                        <div class="UData">
                            <div class="UDat">+4 Years</div>
                            <div class="Ustat">Experience</div>
                            <div class="Uview">View</div>
                        </div>
                    </div>
                
                    <div class="Ustats right-align">
                        <div class="UData">
                            <div class="UDat">+62882009031</div>
                            <div class="Ustat">Phone number</div>
                            <div class="Uview"></div>
                        </div>
                        <div class="UData">
                            <div class="UDat" style="color: #9ED573;">2 Times</div>
                            <div class="Ustat">Over Speed History</div>
                            <div class="Uview">View</div>
                        </div>
                        <div class="UData">
                            <div class="UDat">8 hours/d</div>
                            <div class="Ustat">Working Hours</div>
                            <div class="Uview"></div>
                        </div>
                    </div>
                
                    <div class="userimg"><img src="assets/images/UserD.svg" alt=""></div>
                </div>
                
                
            </div>
            
            <div class="vehdat">
               

            <div class="stats">
                
                <div class="Data">
                    <div class="Dat">125 Km/h</div>
                    <div class="stat">Speed <img src="assets/images/rocket_speed.svg" alt=""></div>
                </div>
                <div class="Data">
                    <div class="Dat">532 Km</div>
                    <div class="stat">Traveled</div>
                </div>
                <div class="Data">
                    <div class="Dat">80Â°C</div>
                    <div class="stat">Temperature</div>
                </div>
                <div class="Data">
                    <div class="Dat">
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                          </label>                          
                    </div>
                    <div class="stat">Engine Status</div>
                </div>
            </div>
            <div class="vehimg"><img src="assets/images/CarD.svg" alt=""></div>
        </div>
        </div>
    </div>

</div>

    <button class="btn btn-primary"onclick="window.history.back()""><-- Back</button>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
                <p>TEST</p>   
    <div class="vehicle-details-container">
        <h1>Vehicle Details</h1>
        <div class="vehicle-details"></div>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-analytics.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
            apiKey: "AIzaSyB9qUzLViR5uALw9Qf_xzJpd20acoV0FEs",
            authDomain: "velinked-web.firebaseapp.com",
            projectId: "velinked-web",
            storageBucket: "velinked-web.appspot.com",
            messagingSenderId: "844821073092",
            appId: "1:844821073092:web:f243c25668079240ec0d91",
            measurementId: "G-CLGQ4RWWTX"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);


        // Fungsi untuk mendapatkan parameter dari URL
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // Mendapatkan nilai docId dari parameter URL
        const docId = getParameterByName('docId');

        // Dapatkan referensi dokumen kendaraan dari Firestore berdasarkan docId
        const vehicleDocRef = firebase.firestore().collection("Vehicle").doc(docId);

        // Ambil data kendaraan
        vehicleDocRef.get().then(doc => {
            if (doc.exists) {
                const vehicleData = doc.data();
                // Tampilkan data kendaraan di halaman
                displayVehicleDetails(vehicleData);
                displayVehicleName(vehicleData);
            } else {
                console.log("No such document!");
            }
        }).catch(error => {
            console.error("Error getting document:", error);
        });

        // Fungsi untuk menampilkan detail kendaraan
        function displayVehicleDetails(vehicleData) {
            const vehicleDetailsContainer = document.querySelector(".vehicle-details");
            const detailsHTML = `
                <div>
                    <h2>${vehicleData.name}</h2>
                    <p>Type: ${vehicleData.type}</p>
                    <p>Status: ${vehicleData.status ? 'Online' : 'Offline'}</p>
                    <!-- Tambahkan lebih banyak informasi kendaraan sesuai kebutuhan -->
                </div>
            `;
            vehicleDetailsContainer.innerHTML = detailsHTML;
        }
       
        function displayVehicleName(vehicleData) {
            const vehicleDetailsContainer = document.querySelector(".vehname");
            const detailsHTML = `
                    <p>${vehicleData.name}</p>
            `;
            vehicleDetailsContainer.innerHTML = detailsHTML;
        }


        // Ambil elemen tombol "Show Detail"
const showDetailButton = document.querySelector('.ShowDetail');

// Tambahkan class active saat tombol ditekan
showDetailButton.addEventListener('click', function() {
    const vehdataDiv = document.querySelector('.vehdata');
    vehdataDiv.classList.toggle('active');
    
    // Ganti class sesuai dengan kondisi active
    vehdataDiv.classList.contains('active') ? vehdataDiv.classList.remove('inactive') : vehdataDiv.classList.add('inactive');

    // Tambahkan atau hilangkan class advstats sesuai kondisi active
    const statsDiv = document.querySelector('.stats');
    const advStatsDiv = document.createElement('div');
    advStatsDiv.classList.add('Data', 'advstats');
    advStatsDiv.innerHTML = `
        <div style="margin-top:30px; margin-left: 10px;">
        <div class="Dat" style="color:#65B768;">Closed</div>
        <div class="stat">Door Condition</div>
        <div class="Dat" style="color:#E14444;">Outside</div>
        <div class="stat">Area Control</div>
        <div class="Dat" style="color:#E14444;">145 Km/Hours</div>
        <div class="stat">Average Speed</div>
        </div>
    `;

    const existingAdvStatsDiv = document.querySelector('.advstats');
    if (existingAdvStatsDiv) {
        existingAdvStatsDiv.remove();
    } else {
        statsDiv.insertAdjacentElement('afterend', advStatsDiv);
    }
});


const image = showDetailButton.querySelector('img');

let isButtonPressed = false;

showDetailButton.addEventListener('click', function() {
    // Ganti status tombol dan ubah gambar sesuai
    isButtonPressed = !isButtonPressed;
    
    if (isButtonPressed) {
        image.src = 'assets/images/ClosedSlideButton.svg';
    } else {
        image.src = 'assets/images/SlideButton.svg';
    }
    
    // Tambahkan animasi saat perubahan gambar
    image.classList.add('clicked');
    
    // Hilangkan class animasi setelah beberapa detik
    setTimeout(function() {
        image.classList.remove('clicked');
    }, 500); // Sesuaikan dengan durasi animasi CSS
});
const userImage = document.querySelector('.user img');
        // Ambil elemen .userdat
        const userdatDiv = document.querySelector('.userdat');
        userdatDiv.style.display = 'none'; // Mulanya tersembunyi

        // Event listener untuk menampilkan dan menyembunyikan div .userdat
        userImage.addEventListener('click', function() {
            userdatDiv.style.display = 'block';
            userdatDiv.classList.add('show'); // Tambahkan class untuk animasi
        });

        const backImage = document.querySelector('.userdat .user img');
        backImage.addEventListener('click', function() {
            userdatDiv.classList.remove('show'); // Hilangkan class untuk animasi
            setTimeout(() => {
                userdatDiv.style.display = 'none';
            }, 500); // Durasi sesuai dengan animasi CSS
        });




    </script>
</body>
</html>
